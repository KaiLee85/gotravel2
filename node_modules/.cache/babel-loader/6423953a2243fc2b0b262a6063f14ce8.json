{"ast":null,"code":"import firebase from \"firebase\";\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_FIREBASE_APPKEY,\n  authDomain: process.env.REACT_APP_FIREBASE_AUTHDOMAIN,\n  projectId: process.env.REACT_APP_FIREBASE_PROJECTID,\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGEBUCKET,\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGINGSENDERID,\n  appId: process.env.REACT_APP_FIREBASE_APPID\n};\nconst app = firebase.initializeApp(firebaseConfig);\nconst auth = app.auth();\nconst db = app.firestore();\nconst googleProvider = new firebase.auth.GoogleAuthProvider();\n\nconst signInWithGoogle = async () => {\n  try {\n    const res = await auth.signInWithPopup(googleProvider);\n    const user = res.user;\n    const query = await db.collection(\"users\").where(\"uid\", \"==\", user.uid).get();\n\n    if (query.docs.length === 0) {\n      await db.collection(\"users\").add({\n        uid: user.uid,\n        name: user.displayName,\n        authProvider: \"google\",\n        email: user.email\n      });\n    }\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\nconst signInWithEmailAndPassword = async (email, password) => {\n  try {\n    await auth.signInWithEmailAndPassword(email, password);\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\nconst registerWithEmailAndPassword = async (name, email, password) => {\n  try {\n    const res = await auth.createUserWithEmailAndPassword(email, password);\n    const user = res.user;\n    await db.collection(\"users\").add({\n      uid: user.uid,\n      name,\n      authProvider: \"local\",\n      email\n    });\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\nconst sendPasswordResetEmail = async email => {\n  try {\n    await auth.sendPasswordResetEmail(email);\n    alert(\"Password reset link sent!\");\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\nconst logout = () => {\n  auth.signOut();\n};\n\nexport { auth, db, signInWithGoogle, signInWithEmailAndPassword, registerWithEmailAndPassword, sendPasswordResetEmail, logout };","map":{"version":3,"sources":["E:/project_gotravel/src/firebase.js"],"names":["firebase","firebaseConfig","apiKey","process","env","REACT_APP_FIREBASE_APPKEY","authDomain","REACT_APP_FIREBASE_AUTHDOMAIN","projectId","REACT_APP_FIREBASE_PROJECTID","storageBucket","REACT_APP_FIREBASE_STORAGEBUCKET","messagingSenderId","REACT_APP_FIREBASE_MESSAGINGSENDERID","appId","REACT_APP_FIREBASE_APPID","app","initializeApp","auth","db","firestore","googleProvider","GoogleAuthProvider","signInWithGoogle","res","signInWithPopup","user","query","collection","where","uid","get","docs","length","add","name","displayName","authProvider","email","err","console","error","alert","message","signInWithEmailAndPassword","password","registerWithEmailAndPassword","createUserWithEmailAndPassword","sendPasswordResetEmail","logout","signOut"],"mappings":"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","sourcesContent":["import firebase from \"firebase\";\r\nconst firebaseConfig = {\r\n  apiKey: process.env.REACT_APP_FIREBASE_APPKEY,\r\n  authDomain: process.env.REACT_APP_FIREBASE_AUTHDOMAIN,\r\n  projectId: process.env.REACT_APP_FIREBASE_PROJECTID,\r\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGEBUCKET,\r\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGINGSENDERID,\r\n  appId: process.env.REACT_APP_FIREBASE_APPID,\r\n};\r\nconst app = firebase.initializeApp(firebaseConfig);\r\nconst auth = app.auth();\r\nconst db = app.firestore();\r\nconst googleProvider = new firebase.auth.GoogleAuthProvider();\r\nconst signInWithGoogle = async () => {\r\n  try {\r\n    const res = await auth.signInWithPopup(googleProvider);\r\n    const user = res.user;\r\n    const query = await db\r\n      .collection(\"users\")\r\n      .where(\"uid\", \"==\", user.uid)\r\n      .get();\r\n    if (query.docs.length === 0) {\r\n      await db.collection(\"users\").add({\r\n        uid: user.uid,\r\n        name: user.displayName,\r\n        authProvider: \"google\",\r\n        email: user.email,\r\n      });\r\n    }\r\n  } catch (err) {\r\n    console.error(err);\r\n    alert(err.message);\r\n  }\r\n};\r\nconst signInWithEmailAndPassword = async (email, password) => {\r\n  try {\r\n    await auth.signInWithEmailAndPassword(email, password);\r\n  } catch (err) {\r\n    console.error(err);\r\n    alert(err.message);\r\n  }\r\n};\r\nconst registerWithEmailAndPassword = async (name, email, password) => {\r\n  try {\r\n    const res = await auth.createUserWithEmailAndPassword(email, password);\r\n    const user = res.user;\r\n    await db.collection(\"users\").add({\r\n      uid: user.uid,\r\n      name,\r\n      authProvider: \"local\",\r\n      email,\r\n    });\r\n  } catch (err) {\r\n    console.error(err);\r\n    alert(err.message);\r\n  }\r\n};\r\nconst sendPasswordResetEmail = async (email) => {\r\n  try {\r\n    await auth.sendPasswordResetEmail(email);\r\n    alert(\"Password reset link sent!\");\r\n  } catch (err) {\r\n    console.error(err);\r\n    alert(err.message);\r\n  }\r\n};\r\nconst logout = () => {\r\n  auth.signOut();\r\n};\r\nexport {\r\n  auth,\r\n  db,\r\n  signInWithGoogle,\r\n  signInWithEmailAndPassword,\r\n  registerWithEmailAndPassword,\r\n  sendPasswordResetEmail,\r\n  logout,\r\n};\r\n"]},"metadata":{},"sourceType":"module"}